import{r as m,j as e,a as p,y as u}from"./app-DEWfI6fL.js";import{G as h}from"./globe-BgcyB6nz.js";import{S as b}from"./save-DpHw7Eqz.js";import{E as g}from"./eye-DaeH5UXN.js";import"./createLucideIcon-Cfm7QdwR.js";const y=(a,c)=>{if(!c)return"0.00";const{currency_symbol:t="",currency_symbol_position:n="before",currency_thousand_separator:d=",",currency_decimal_separator:i=".",currency_decimal_digits:o=2}=c,r=Number(a).toFixed(o);let[s,l]=r.split(".");d&&s.length>3&&(s=s.replace(/\B(?=(\d{3})+(?!\d))/g,d));const x=o>0&&l?`${s}${i}${l}`:s;return n==="after"?`${x} ${t}`.trim():`${t} ${x}`.trim()},S=({selectedCurrency:a,countries:c,onCurrencyChange:t})=>{const[n,d]=m.useState(!1),i=s=>{s.preventDefault(),d(!0),p.put(route("settings.currencybase.update"),{base_currency_code:a},{onFinish:()=>d(!1),onSuccess:()=>{u.success("Moneda base actualizada"),t&&t(a)},onError:l=>{u.error("Error al guardar la configuración"),console.error("Errores:",l)}})},o=m.useMemo(()=>Array.from(new Map(c.filter(s=>s.currency_code&&s.currency_name).map(s=>[s.currency_code,s])).values()).sort((s,l)=>(s.currency_name||"").localeCompare(l.currency_name||"")),[c]),r=m.useMemo(()=>c.find(s=>s.currency_code===a)||null,[a,c]);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("form",{onSubmit:i,children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-white/20",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx(h,{className:"h-6 w-6 text-emerald-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Moneda Base del Sistema"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["La moneda base se usa para todos los cálculos internos y conversión de precios. Recomendamos usar ",e.jsx("strong",{children:"Dólar Estadounidense (USD)"}),"."]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Moneda Base"}),e.jsx("select",{value:a,onChange:s=>t(s.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500",children:o.map(s=>e.jsxs("option",{value:s.currency_code,children:[s.currency_name," (",s.currency_code,") - ",s.currency_symbol]},s.currency_code))})]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:[e.jsx(b,{className:"h-5 w-5 mr-2"}),n?"Guardando...":"Guardar Moneda Base"]})})]})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-white/20 sticky top-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(g,{className:"h-5 w-5 text-emerald-600"}),e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Vista Previa"})]}),r?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Moneda"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[r.currency_name," (",r.currency_code,")"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Símbolo"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.currency_symbol})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ejemplo de precio"}),e.jsx("div",{className:"mt-1 p-3 bg-emerald-50 rounded-lg",children:e.jsx("p",{className:"font-mono text-lg font-bold text-emerald-800",children:y(123456789e-2,r)})})]}),e.jsxs("div",{className:"text-xs text-gray-500 space-y-1 pt-2 border-t",children:[e.jsxs("div",{children:['• Separador miles: "',e.jsx("span",{className:"font-mono",children:r.currency_thousand_separator}),'"']}),e.jsxs("div",{children:['• Separador decimal: "',e.jsx("span",{className:"font-mono",children:r.currency_decimal_separator}),'"']}),e.jsxs("div",{children:["• Símbolo: ",r.currency_symbol_position==="after"?"después":"antes"]})]})]}):e.jsx("p",{className:"text-gray-500 text-center",children:"Selecciona una moneda para ver la vista previa."}),e.jsx("div",{className:"mt-6 text-xs text-gray-500 text-center",children:"Esta vista previa muestra cómo se verán los precios en tu tienda."})]})})]})};export{S as default};
