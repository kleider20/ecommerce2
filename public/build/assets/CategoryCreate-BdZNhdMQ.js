import{r as i,u as g,j as e,H as h}from"./app-veqlbRop.js";import{S as b}from"./SuperAdminLayout-CZDjE9N7.js";import{T as o}from"./tag-CeaYWAN7.js";import{c}from"./createLucideIcon-CyTgOFtE.js";import{X as j}from"./x-CXVp1HMM.js";import{I as f}from"./image-CHHIBJ-z.js";import{S as v}from"./save-C1kmD5Oy.js";import"./shield-CDJkofxC.js";import"./credit-card-Cew9DDo5.js";import"./search-Cjp4NVQJ.js";const y=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],N=c("grid-3x3",y);const w=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],k=c("upload",w),B=({auth:m,parentCategories:d})=>{const[r,l]=i.useState(null);new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});const a=g({name:"",slug:"",description:"",parent_id:"",status:"active",meta_title:"",meta_description:"",images:[]});i.useEffect(()=>{if(a.data.name){const t=a.data.name.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/[\s-]+/g,"-").replace(/^-+|-+$/g,"");a.setData("slug",t)}},[a.data.name]);const n=()=>{if(!a.data.parent_id)return"";const t=d.find(s=>s.id==a.data.parent_id);return t?t.name.replace("  ↳ ",""):""},x=t=>{const s=t.target.files[0];if(s){const u=URL.createObjectURL(s);l(u),a.setData("images",[s])}},p=t=>{t.preventDefault();const s=new FormData;s.append("name",a.data.name),s.append("slug",a.data.slug),s.append("description",a.data.description||""),s.append("parent_id",a.data.parent_id||""),s.append("status",a.data.status),s.append("meta_title",a.data.meta_title||""),s.append("meta_description",a.data.meta_description||""),a.data.images.length>0&&s.append("images[]",a.data.images[0]),a.post(route("categories.store"),{preserveScroll:!0,onSuccess:()=>{a.reset(),l(null)}})};return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Crear Categoría o Subcategoría"}),e.jsx(b,{user:m.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Crear Categoría o Subcategoría"}),children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl p-6 border border-white/20",children:e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre *"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",required:!0,value:a.data.name,onChange:t=>a.setData("name",t.target.value),className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Ej: Muebles, Camas, etc."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slug (URL amigable) *"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("div",{className:"w-full pl-10 pr-4 py-3 text-sm bg-gray-100 border border-gray-300 rounded-xl font-mono text-gray-700 cursor-not-allowed",children:e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["URL: ",e.jsxs("code",{className:"bg-gray-200 px-1 rounded",children:["/categoria/",a.data.slug||"ejemplo"]})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),e.jsx("textarea",{value:a.data.description||"",onChange:t=>a.setData("description",t.target.value),rows:3,className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Categoría"}),e.jsxs("div",{className:"relative",children:[e.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("select",{value:a.data.parent_id,onChange:t=>a.setData("parent_id",t.target.value),className:"w-full pl-10 pr-4 py-3 text-sm border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent appearance-none bg-white font-mono",children:d.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]}),e.jsx("div",{className:"mt-2 text-sm",children:a.data.parent_id?e.jsxs("p",{className:"text-blue-600 font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("p",{children:["Se creará como subcategoría de ",e.jsxs("strong",{children:['"',n(),'"']}),"."]})]}):e.jsxs("p",{className:"text-purple-600 font-medium flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsxs("p",{children:["Se creará como ",e.jsx("strong",{children:"categoría principal."})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs("select",{value:a.data.status,onChange:t=>a.setData("status",t.target.value),className:"w-full px-4 py-3 text-sm border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[e.jsx("option",{value:"active",children:"Activa"}),e.jsx("option",{value:"inactive",children:"Inactiva"}),e.jsx("option",{value:"draft",children:"Borrador"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen Principal"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-emerald-400 cursor-pointer",onClick:()=>document.getElementById("imageUpload").click(),children:[e.jsx(k,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Subir imagen"}),e.jsx("input",{id:"imageUpload",type:"file",accept:"image/*",onChange:x,className:"hidden"})]}),r&&e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:r,alt:"Vista previa",className:"w-32 h-32 object-cover rounded-lg border"}),e.jsx("button",{type:"button",onClick:()=>{l(null),a.setData("images",[])},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100",children:e.jsx(j,{className:"h-3 w-3"})})]})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Vista Previa"}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("div",{className:"w-full h-24 bg-gray-200 rounded-lg mb-3 flex items-center justify-center",children:r?e.jsx("img",{src:r,alt:"preview",className:"h-full object-contain"}):e.jsx(f,{className:"h-6 w-6 text-gray-400"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:a.data.name||"Nombre..."}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:a.data.description||"Descripción..."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.data.status==="active"?"bg-emerald-100 text-emerald-800":a.data.status==="inactive"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:a.data.status==="active"?"Activa":a.data.status==="inactive"?"Inactiva":"Borrador"}),a.data.parent_id?e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-medium",children:["Subcategoría de: ",e.jsx("strong",{children:n()})]}):e.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full font-medium",children:"Categoría principal"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["URL: ",e.jsxs("code",{className:"bg-gray-200 px-1 rounded",children:["/categoria/",a.data.slug||"ejemplo"]})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>{a.reset(),l(null)},className:"px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:a.processing,className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl hover:from-emerald-600 hover:to-teal-600 flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(v,{className:"h-5 w-5"}),e.jsx("span",{children:"Crear Categoría"})]})]})]})})})})})]})};export{B as default};
