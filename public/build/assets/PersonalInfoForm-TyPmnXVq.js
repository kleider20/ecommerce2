import{r as n,j as e}from"./app-_a53eJXV.js";import{U as j}from"./user-D2vO7lib.js";import{C as v}from"./credit-card-BtWejAfS.js";import{M as _}from"./map-pin-DX5T3Awy.js";import{P as N}from"./phone-J6GuxTHF.js";import{C as w}from"./calendar-CCcmdDgL.js";import"./createLucideIcon-mfdPizJi.js";const F=()=>{const[a,i]=n.useState({document_type:"venezolano",document_number:"",first_name:"",middle_name:"",first_surname:"",second_surname:"",country_id:"",state_id:"",city:"",address:"",postal_code:"",phone:"",date_of_birth:"",gender:"not_specified"}),[f,b]=n.useState([]),[g,d]=n.useState([]),[p,x]=n.useState(!0),[c,u]=n.useState(!1);n.useEffect(()=>{(async()=>{try{const[t,l]=await Promise.all([fetch("/api/user/profile"),fetch("/api/countries")]),s=await t.json(),y=await l.json();b(y),s.profile&&(i({document_type:s.profile.document_type||"venezolano",document_number:s.profile.document_number||"",first_name:s.profile.first_name||"",middle_name:s.profile.middle_name||"",first_surname:s.profile.first_surname||"",second_surname:s.profile.second_surname||"",country_id:s.profile.country_id||"",state_id:s.profile.state_id||"",city:s.profile.city||"",address:s.profile.address||"",postal_code:s.profile.postal_code||"",phone:s.profile.phone||"",date_of_birth:s.profile.date_of_birth||"",gender:s.profile.gender||"not_specified"}),s.profile.country_id&&m(s.profile.country_id))}catch(t){console.error("Error loading data:",t)}finally{x(!1)}})()},[]);const m=async r=>{try{const l=await(await fetch(`/api/countries/${r}/states`)).json();d(l)}catch(t){console.error("Error loading states:",t),d([])}},o=(r,t)=>{i(l=>({...l,[r]:t})),r==="country_id"&&(m(t),i(l=>({...l,state_id:"",[r]:t})))},h=async r=>{r.preventDefault(),u(!0);try{const t=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(a)});if(t.ok)alert("¡Perfil actualizado correctamente!");else{const l=await t.json();alert("Error: "+(l.message||"No se pudo guardar"))}}catch(t){console.error("Error:",t),alert("Error al guardar los datos")}finally{u(!1)}};return p?e.jsx("div",{className:"text-center py-8",children:"Cargando..."}):e.jsxs("form",{onSubmit:h,children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),"Información Personal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de documento *"}),e.jsxs("select",{value:a.document_type,onChange:r=>o("document_type",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"venezolano",children:"V"}),e.jsx("option",{value:"passporte",children:"P"}),e.jsx("option",{value:"extranjero",children:"E"}),e.jsx("option",{value:"rif",children:"J"}),e.jsx("option",{value:"gobierno",children:"G"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número de documento *"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:a.document_number,onChange:r=>o("document_number",r.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primer nombre *"}),e.jsx("input",{type:"text",value:a.first_name,onChange:r=>o("first_name",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Segundo nombre"}),e.jsx("input",{type:"text",value:a.middle_name,onChange:r=>o("middle_name",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primer apellido *"}),e.jsx("input",{type:"text",value:a.first_surname,onChange:r=>o("first_surname",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Segundo apellido"}),e.jsx("input",{type:"text",value:a.second_surname,onChange:r=>o("second_surname",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"País *"}),e.jsxs("select",{value:a.country_id,onChange:r=>o("country_id",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Selecciona un país"}),f.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado/Región"}),e.jsxs("select",{value:a.state_id,onChange:r=>o("state_id",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!a.country_id,children:[e.jsx("option",{value:"",children:"Selecciona un estado"}),g.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:a.city,onChange:r=>o("city",r.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código postal"}),e.jsx("input",{type:"text",value:a.postal_code,onChange:r=>o("postal_code",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección completa"}),e.jsx("textarea",{value:a.address,onChange:r=>o("address",r.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"tel",value:a.phone,onChange:r=>o("phone",r.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de nacimiento"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"date",value:a.date_of_birth,onChange:r=>o("date_of_birth",r.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Género *"}),e.jsxs("select",{value:a.gender,onChange:r=>o("gender",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"not_specified",children:"Prefiero no decirlo"}),e.jsx("option",{value:"male",children:"Masculino"}),e.jsx("option",{value:"female",children:"Femenino"}),e.jsx("option",{value:"other",children:"Otro"})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-lg text-sm font-medium transition-colors shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Guardando...":"Guardar cambios"})})]})};export{F as default};
