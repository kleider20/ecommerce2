import{r as l,j as e}from"./app-CU0P3dLZ.js";import{U as j}from"./user-amanYjy-.js";import{C as v}from"./credit-card-DOQqSUsI.js";import{M as N}from"./map-pin-CZh7yPYA.js";import{P as _}from"./phone-BxAsXJrs.js";import{C as w}from"./calendar-Dd92ZNqT.js";import"./createLucideIcon-CiwuWYqI.js";const F=()=>{const[s,n]=l.useState({document_type:"dni",document_number:"",first_name:"",middle_name:"",first_surname:"",second_surname:"",country_id:"",state_id:"",city:"",address:"",postal_code:"",phone:"",date_of_birth:"",gender:"not_specified"}),[b,g]=l.useState([]),[x,i]=l.useState([]),[f,p]=l.useState(!0),[c,u]=l.useState(!1);l.useEffect(()=>{(async()=>{try{const[a,o]=await Promise.all([fetch("/api/user/profile"),fetch("/api/countries")]),d=await a.json(),y=await o.json();g(y),n(d.profile||{}),d.profile?.country_id&&m(d.profile.country_id)}catch(a){console.error("Error loading data:",a)}finally{p(!1)}})()},[]);const m=async r=>{try{const o=await(await fetch(`/api/countries/${r}/states`)).json();i(o)}catch(a){console.error("Error loading states:",a),i([])}},t=(r,a)=>{n(o=>({...o,[r]:a})),r==="country_id"&&(m(a),n(o=>({...o,state_id:"",[r]:a})))},h=async r=>{r.preventDefault(),u(!0);try{const a=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify(s)});if(a.ok)alert("¡Perfil actualizado correctamente!");else{const o=await a.json();alert("Error: "+(o.message||"No se pudo guardar"))}}catch(a){console.error("Error:",a),alert("Error al guardar los datos")}finally{u(!1)}};return f?e.jsx("div",{className:"text-center py-8",children:"Cargando..."}):e.jsxs("form",{onSubmit:h,children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5"}),"Información Personal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de documento *"}),e.jsxs("select",{value:s.document_type,onChange:r=>t("document_type",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"venezolano",children:"V"}),e.jsx("option",{value:"passporte",children:"P"}),e.jsx("option",{value:"extranjero",children:"E"}),e.jsx("option",{value:"rif",children:"J"}),e.jsx("option",{value:"gobierno",children:"G"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número de documento *"}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:s.document_number,onChange:r=>t("document_number",r.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primer nombre *"}),e.jsx("input",{type:"text",value:s.first_name,onChange:r=>t("first_name",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Segundo nombre"}),e.jsx("input",{type:"text",value:s.middle_name||"",onChange:r=>t("middle_name",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primer apellido *"}),e.jsx("input",{type:"text",value:s.first_surname,onChange:r=>t("first_surname",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Segundo apellido"}),e.jsx("input",{type:"text",value:s.second_surname||"",onChange:r=>t("second_surname",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"País *"}),e.jsxs("select",{value:s.country_id,onChange:r=>t("country_id",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Selecciona un país"}),b.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado/Región"}),e.jsxs("select",{value:s.state_id||"",onChange:r=>t("state_id",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!s.country_id,children:[e.jsx("option",{value:"",children:"Selecciona un estado"}),x.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:s.city||"",onChange:r=>t("city",r.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Código postal"}),e.jsx("input",{type:"text",value:s.postal_code||"",onChange:r=>t("postal_code",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección completa"}),e.jsx("textarea",{value:s.address||"",onChange:r=>t("address",r.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"tel",value:s.phone||"",onChange:r=>t("phone",r.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de nacimiento"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"date",value:s.date_of_birth||"",onChange:r=>t("date_of_birth",r.target.value),className:"w-full pl-10 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Género *"}),e.jsxs("select",{value:s.gender,onChange:r=>t("gender",r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"not_specified",children:"Prefiero no decirlo"}),e.jsx("option",{value:"male",children:"Masculino"}),e.jsx("option",{value:"female",children:"Femenino"}),e.jsx("option",{value:"other",children:"Otro"})]})]})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx("button",{type:"submit",disabled:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-lg text-sm font-medium transition-colors shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Guardando...":"Guardar cambios"})})]})};export{F as default};
