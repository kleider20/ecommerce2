import{r as x,j as e}from"./app-veqlbRop.js";import{S as C}from"./SuperAdminLayout-CZDjE9N7.js";import{a as N,S as P,P as S}from"./ProductCard-DU7eJLz2.js";import{P as E,T as I}from"./trash-2-BMoJuRuX.js";import{I as y}from"./image-CHHIBJ-z.js";import{P as v}from"./package-DNGG6oYV.js";import{c as D}from"./createLucideIcon-CyTgOFtE.js";import{T as F}from"./tag-CeaYWAN7.js";import{C as A}from"./circle-check-big-oELdVuLo.js";import"./shield-CDJkofxC.js";import"./x-CXVp1HMM.js";import"./credit-card-Cew9DDo5.js";import"./search-Cjp4NVQJ.js";import"./formatCurrency-BtuVL3gA.js";import"./circle-alert-BPJMbNgx.js";import"./truck-C7DwjniX.js";import"./map-pin-0fufEzTN.js";import"./eye-CoiTSim3.js";import"./clock-BDwWau29.js";const q=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],$=D("award",q),M=({onMainImageSelect:u,onGalleryImagesSelect:d,initialMainImage:s=null,initialGallery:m=[]})=>{const h=x.useRef(null),[p,g]=x.useState(s),[n,t]=x.useState(m),b=a=>{const i=Array.from(a.target.files);if(i.length===0)return;const o=[...n];i.forEach(r=>{const l=new FileReader;l.onload=()=>{o.push({file:r,url:l.result}),t([...o]),d&&d([...o])},l.readAsDataURL(r)})},f=a=>{const i=n[a];g(i.url),u&&u(i.file)},j=a=>{const i=n.filter((o,r)=>r!==a);t(i),d&&d(i),p===n[a]?.url&&g(null)};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Galería de Imágenes (",n.length,")"]}),e.jsxs("button",{type:"button",onClick:()=>h.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[e.jsx(E,{className:"w-4 h-4"}),"Añadir Imágenes"]})]}),e.jsx("input",{type:"file",ref:h,onChange:b,accept:"image/*",multiple:!0,className:"hidden"}),n.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:n.map((a,i)=>{const o=p===a.url;return e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"w-full h-200 aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-gray-200",children:[e.jsx("img",{src:a.url,alt:`Galería ${i+1}`,className:"w-full h-full object-cover"}),o&&e.jsxs("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(N,{className:"w-3 h-3"}),"Portada"]})]}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center gap-3 opacity-0 group-hover:opacity-100 transition-opacity p-2",children:[e.jsxs("button",{type:"button",onClick:r=>{r.stopPropagation(),f(i)},className:"flex flex-col items-center text-white bg-yellow-500 hover:bg-yellow-600 rounded-lg px-3 py-1.5 transition-colors",title:"Usar como portada",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs mt-1",children:"Portada"})]}),!o&&e.jsxs("button",{type:"button",onClick:r=>{r.stopPropagation(),j(i)},className:"flex flex-col items-center text-white bg-red-500 hover:bg-red-600 rounded-lg px-3 py-1.5 transition-colors",title:"Eliminar de la galería",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs mt-1",children:"Eliminar"})]})]})]},i)})}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center bg-gray-50",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(y,{className:"w-6 h-6 text-gray-500"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No hay imágenes en la galería"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Sube imágenes para crear una galería"})]})]})})},re=({categories:u,userConfig:d})=>{const[s,m]=x.useState({name:"",description:"",category_id:"",price_usd:"",original_price_usd:"",stock:0,in_stock:!1,is_active:!0,brand:"",is_bestseller:!1,is_new:!1,rating:0,review_count:0,free_shipping:!1,warranty:"",price_per_unit:"",sku:"",short_description:"",main_image:null,gallery_images:[]}),[h,p]=x.useState(null),[g,n]=x.useState(!1),t=r=>{const{name:l,value:c,type:_,checked:w}=r.target;m(k=>({...k,[l]:_==="checkbox"?w:c}))},b=r=>{m(c=>({...c,main_image:r}));const l=new FileReader;l.onload=()=>p(l.result),l.readAsDataURL(r)},f=r=>{m(l=>({...l,gallery_images:r}))},j=async r=>{r.preventDefault(),n(!0);const l=new FormData;Object.keys(s).forEach(c=>{c!=="main_image"&&c!=="gallery_images"&&l.append(c,s[c])}),s.main_image&&l.append("main_image",s.main_image),s.gallery_images.forEach(c=>{l.append("gallery_images[]",c)});try{(await fetch(route("products.store"),{method:"POST",body:l,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok?(alert("Producto creado exitosamente"),m({name:"",description:"",category_id:"",price_usd:"",original_price_usd:"",stock:0,in_stock:!1,is_active:!0,brand:"",is_bestseller:!1,is_new:!1,rating:0,review_count:0,free_shipping:!1,warranty:"",price_per_unit:"",sku:"",short_description:"",main_image:null,gallery_images:[]}),p(null)):alert("Error al crear el producto")}catch(c){console.error("Error:",c),alert("Error de red al crear el producto")}finally{n(!1)}},a=r=>r==="name"&&!s.name.trim()?"El nombre es requerido":r==="category_id"&&!s.category_id?"La categoría es requerida":r==="price_usd"&&(!s.price_usd||parseFloat(s.price_usd)<=0)?"El precio debe ser mayor a 0":r==="description"&&!s.description.trim()?"La descripción es requerida":null,i=h||"/default-product.png",o={id:"preview",...s,price_usd:parseFloat(s.price_usd)||0,original_price_usd:s.original_price_usd?parseFloat(s.original_price_usd):null,stock:parseInt(s.stock)||0,rating:parseFloat(s.rating)||0,review_count:parseInt(s.review_count)||0,category:u?.find(r=>r.id===parseInt(s.category_id))||null,supplier:{name:"Proveedor de Ejemplo",location:"Ciudad, País",verified:!0},image_url:i};return e.jsx(C,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl mb-4",children:e.jsx(v,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-2",children:"Crear Nuevo Producto"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Complete todos los campos necesarios para crear un producto."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 p-6 md:p-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"w-4 h-4 text-blue-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Información Básica"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nombre del producto ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:t,required:!0,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 ${a("name")?"border-red-300":"border-gray-300"}`,placeholder:"Ej: Auriculares Bluetooth..."}),a("name")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("name")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU"}),e.jsx("input",{type:"text",name:"sku",value:s.sku,onChange:t,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: AUD-BT-PRO-001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marca"}),e.jsx("input",{type:"text",name:"brand",value:s.brand,onChange:t,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Sony, Apple"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Categoría ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"category_id",value:s.category_id,onChange:t,required:!0,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a("category_id")?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"Selecciona una categoría"}),u?.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),a("category_id")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("category_id")})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(P,{className:"w-4 h-4 text-green-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Precios y Stock"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Precio (USD) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",step:"0.01",name:"price_usd",value:s.price_usd,onChange:t,required:!0,min:"0",className:`w-full pl-8 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a("price_usd")?"border-red-300":"border-gray-300"}`,placeholder:"0.00"})]}),a("price_usd")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("price_usd")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio original (USD)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",step:"0.01",name:"original_price_usd",value:s.original_price_usd,onChange:t,min:"0",className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Dejar vacío si no hay descuento"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Stock ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",name:"stock",value:s.stock,onChange:t,required:!0,min:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio por unidad"}),e.jsx("input",{type:"text",name:"price_per_unit",value:s.price_per_unit,onChange:t,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"/unidad, /kg"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx($,{className:"w-4 h-4 text-purple-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Características"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_bestseller",checked:s.is_bestseller,onChange:t,className:"sr-only"}),e.jsx("div",{className:`block w-12 h-6 rounded-full transition-colors duration-200 ${s.is_bestseller?"bg-orange-600":"bg-gray-300"}`}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Más vendido"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"is_new",checked:s.is_new,onChange:t,className:"sr-only"}),e.jsx("div",{className:`block w-12 h-6 rounded-full transition-colors duration-200 ${s.is_new?"bg-green-600":"bg-gray-300"}`}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Nuevo"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"free_shipping",checked:s.free_shipping,onChange:t,className:"sr-only"}),e.jsx("div",{className:`block w-12 h-6 rounded-full transition-colors duration-200 ${s.free_shipping?"bg-green-600":"bg-gray-300"}`}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Envío gratis"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Garantía"}),e.jsx("input",{type:"text",name:"warranty",value:s.warranty,onChange:t,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500",placeholder:"Ej: 2 años de garantía"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(F,{className:"w-4 h-4 text-amber-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Descripciones"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción corta"}),e.jsx("textarea",{name:"short_description",value:s.short_description,onChange:t,rows:"2",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Máximo 160 caracteres..."}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[s.short_description?.length||0,"/160 caracteres"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Descripción completa ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"description",value:s.description,onChange:t,rows:"5",required:!0,className:`w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 resize-none ${a("description")?"border-red-300":"border-gray-300"}`,placeholder:"Describe el producto..."}),a("description")&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a("description")})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-cyan-100 rounded-lg flex items-center justify-center",children:e.jsx(y,{className:"w-4 h-4 text-cyan-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Imágenes del Producto"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(M,{onMainImageSelect:b,onGalleryImagesSelect:f,initialMainImage:s.image_url,initialGallery:[]})})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),g?"Guardando...":"Guardar Producto"]})})})]})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 p-6 md:p-8 sticky top-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(y,{className:"w-4 h-4 text-gray-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Vista Previa"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-full max-w-xs",children:e.jsx(S,{product:o,userConfig:d,onViewDetails:()=>{},onToggleFavorite:()=>{},isFavorite:!1})})})]})})]})]})})})};export{re as default};
